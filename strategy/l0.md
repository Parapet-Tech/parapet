# L0: Input Normalization

L0 is the first layer in the request path. It normalizes message content before any detection or enforcement layers run.

## Config

```yaml
layers:
  L0:
    mode: sanitize
```

`mode: sanitize` enables L0. Any other mode value effectively disables L0 behavior.

## What L0 does

L0 normalization runs in this order:

1. NFKC unicode normalization (for fullwidth and combining character variants).
2. HTML tag stripping (including `script` and `style` content).
3. Invisible and zero-width character removal.
4. Mixed-script confusable replacement (Latin/Cyrillic/Greek lookalikes in mixed words).

L0 also remaps trust-span byte offsets after normalization so span boundaries stay correct.

## Role marker neutralization

After normalization, L0 neutralizes chat-template role markers in untrusted content (for example `"[INST]"`, `"<|im_start|>system"`, `"<<SYS>>"`). It replaces token bytes with spaces to preserve offsets for downstream layers.

Scope:

1. Full content of untrusted messages.
2. Only untrusted spans inside trusted messages.

## Notes

1. L0 is a transform layer, not a block layer.
2. L0 must run before L1/L2a/L3 for best bypass resistance.
